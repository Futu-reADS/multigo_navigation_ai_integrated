# èª²é¡Œã¨ä¿®æ­£ - å®Œå…¨ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

**æœ€çµ‚æ›´æ–°:** 2025-12-02
**ç·èª²é¡Œæ•°:** 28ä»¶ (ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«10ä»¶ã€é«˜å„ªå…ˆåº¦8ä»¶ã€ä¸­å„ªå…ˆåº¦7ä»¶ã€ä½å„ªå…ˆåº¦3ä»¶)

---

## ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

### ãƒ•ã‚§ãƒ¼ã‚ºåˆ¥

| ãƒ•ã‚§ãƒ¼ã‚º | èª²é¡Œ | å·¥æ•° | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
|-------|-----|------|---------|
| **ãƒ•ã‚§ãƒ¼ã‚º1** | CRIT-01, CRIT-02, CRIT-03, CRIT-05, HIGH-01 | 53æ™‚é–“ | ğŸ”´ ä¿®æ­£å¿…é ˆ |
| **ãƒ•ã‚§ãƒ¼ã‚º2** | CRIT-04 (ãƒ†ã‚¹ãƒˆ) | 100æ™‚é–“ | ğŸ”´ å¿…é ˆ |
| **ãƒ•ã‚§ãƒ¼ã‚º3** | CRIT-09, CRIT-10, HIGH-02ï½HIGH-08 | 104æ™‚é–“ | ğŸŸ¡ å®Ÿæ–½æ¨å¥¨ |
| **ãƒ•ã‚§ãƒ¼ã‚º4** | CRIT-06, CRIT-07, CRIT-08 | 86æ™‚é–“ | ğŸŸ¡ å®Ÿæ–½æ¨å¥¨ |
| **å°†æ¥** | MED-01ï½LOW-03 | 180æ™‚é–“ | ğŸŸ¢ ã‚ã‚‹ã¨è‰¯ã„ |

---

## ãƒ•ã‚§ãƒ¼ã‚º1: ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãƒã‚° (ç¬¬1é€±)

### CRIT-01: PIDç©åˆ†é …ãŒç´¯ç©ã•ã‚Œãªã„ â±ï¸ 4æ™‚é–“

**ãƒ•ã‚¡ã‚¤ãƒ«:** `src/nav_docking/nav_docking.cpp:197`

**å•é¡Œ:** ç©åˆ†é …ãŒç´¯ç©ã§ã¯ãªãä¸Šæ›¸ãã•ã‚Œã‚‹
```cpp
// èª¤ã‚Š:
double integral = error * callback_duration;
```

**ä¿®æ­£:**
```cpp
// ã‚¯ãƒ©ã‚¹ãƒ¡ãƒ³ãƒãƒ¼:
double integral_dist_ = 0.0;

// åˆ¶å¾¡ãƒ«ãƒ¼ãƒ—å†…:
integral_dist_ += error * callback_duration;  // ç´¯ç©!
```

**ãƒ†ã‚¹ãƒˆ:** 10å›ã®ãƒ‰ãƒƒã‚­ãƒ³ã‚°è©¦è¡Œã€ã‚¹ãƒ ãƒ¼ã‚ºãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã¨å®šå¸¸çŠ¶æ…‹èª¤å·®ãŒãªã„ã“ã¨ã‚’ç¢ºèª

---

### CRIT-02: ãƒ‡ãƒ¥ã‚¢ãƒ«ãƒãƒ¼ã‚«ãƒ¼è·é›¢è¨ˆç®— â±ï¸ 1æ™‚é–“

**ãƒ•ã‚¡ã‚¤ãƒ«:** `src/nav_docking/nav_docking.cpp:387, 503`

**å•é¡Œ:** å¹³å‡è¨ˆç®—æ™‚ã®æ‹¬å¼§ã®æ¬ è½
```cpp
// èª¤ã‚Š:
double distance = (left_x) + (right_x) / 2;  // = left + right/2
```

**ä¿®æ­£:**
```cpp
double distance = (left_x + right_x) / 2;  // = (left + right)/2
```

---

### HIGH-01: æœªåˆæœŸåŒ–å¤‰æ•° â±ï¸ 1æ™‚é–“

**ãƒ•ã‚¡ã‚¤ãƒ«:** `src/nav_docking/nav_docking.cpp` ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿

**ä¿®æ­£:** ã™ã¹ã¦ã®ãƒ¡ãƒ³ãƒãƒ¼å¤‰æ•°ã‚’åˆæœŸåŒ–:
```cpp
NavDockingNode::NavDockingNode() : Node("nav_docking_node"),
    first_confirmation_received_(false),
    second_confirmation_received_(false),
    integral_dist_(0.0),
    integral_y_(0.0),
    integral_yaw_(0.0)
{ /* ... */ }
```

---

## ãƒ•ã‚§ãƒ¼ã‚º1: å®‰å…¨æ©Ÿèƒ½ (ç¬¬2-4é€±)

### CRIT-03: ãƒ‰ãƒƒã‚­ãƒ³ã‚°ä¸­ã«LiDARæœªä½¿ç”¨ â±ï¸ 20æ™‚é–“

**å•é¡Œ:** ãƒ“ã‚¸ãƒ§ãƒ³ã®ã¿ = éšœå®³ç‰©ãŒè¦‹ãˆãªã„

**ä¿®æ­£:** nav_dockingã«LiDARã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ :
```cpp
void scanCallback(LaserScan::SharedPtr msg) {
    double min_dist = *std::min_element(msg->ranges.begin(), msg->ranges.end());
    if (min_dist < 0.30) {  // 30cmå®‰å…¨ã‚¾ãƒ¼ãƒ³
        obstacle_detected_ = true;
        pauseDocking();
    }
}
```

**å‚è€ƒ:** [IMPLEMENTATION-GUIDE.md - ã‚¿ã‚¹ã‚¯3.2](./IMPLEMENTATION-GUIDE.md#task-32-add-lidar-during-docking-20-hours)

---

### CRIT-05: ç·Šæ€¥åœæ­¢ãªã— â±ï¸ 12æ™‚é–“

**ä¿®æ­£:** `/emergency_stop` ãƒˆãƒ”ãƒƒã‚¯ã®å®Ÿè£…ã€ã™ã¹ã¦ã®ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ãƒ‰ãŒã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒ–

**å‚è€ƒ:** [IMPLEMENTATION-GUIDE.md - ã‚¿ã‚¹ã‚¯2.2](./IMPLEMENTATION-GUIDE.md#task-22-implement-emergency-stop-12-hours)

---

### CRIT-06: ãƒ†ã‚£ãƒ¼ãƒãƒ³ã‚°ãƒ¢ãƒ¼ãƒ‰ãªã— â±ï¸ 40æ™‚é–“

**ãƒ•ã‚§ãƒ¼ã‚º4ã‚¿ã‚¹ã‚¯**

**å†…å®¹:** äººé–“ã«ã‚ˆã‚‹ãƒãƒƒãƒ—æ§‹ç¯‰ã¨ã‚¦ã‚§ã‚¤ãƒã‚¤ãƒ³ãƒˆä¿å­˜

**å‚è€ƒ:** [IMPLEMENTATION-GUIDE.md - ç¬¬13-14é€±](./IMPLEMENTATION-GUIDE.md#week-13-14-teaching-mode)

---

### CRIT-07: å´–æ¤œå‡ºãªã— â±ï¸ 30æ™‚é–“

**ãƒ•ã‚§ãƒ¼ã‚º4ã‚¿ã‚¹ã‚¯** (ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢æ±ºå®šãŒå¿…è¦)

**å†…å®¹:** éšæ®µ/è½ä¸‹ã‚’æ¤œå‡ºã™ã‚‹ãŸã‚ã®IRã‚»ãƒ³ã‚µãƒ¼ã¾ãŸã¯æ·±åº¦ã‚«ãƒ¡ãƒ©

---

### CRIT-08: ã‚¸ã‚ªãƒ•ã‚§ãƒ³ã‚·ãƒ³ã‚°ãªã— â±ï¸ 16æ™‚é–“

**ãƒ•ã‚§ãƒ¼ã‚º1ã‚¿ã‚¹ã‚¯ (åŸºæœ¬)ã€ãƒ•ã‚§ãƒ¼ã‚º4 (å®Œå…¨)**

**å†…å®¹:** ç«‹å…¥ç¦æ­¢ã‚¾ãƒ¼ãƒ³ + è¨±å¯å¢ƒç•Œ

**å‚è€ƒ:** [IMPLEMENTATION-GUIDE.md - ã‚¿ã‚¹ã‚¯4.1](./IMPLEMENTATION-GUIDE.md#task-41-basic-geofencing-16-hours)

---

## ãƒ•ã‚§ãƒ¼ã‚º2: ãƒ†ã‚¹ãƒˆ

### CRIT-04: ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ã‚¼ãƒ­ â±ï¸ 100æ™‚é–“

**ç›®æ¨™:** 80%ã®è‡ªå‹•ã‚«ãƒãƒ¬ãƒƒã‚¸

**å†…è¨³:**
- ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ: 60æ™‚é–“ (40-50ãƒ†ã‚¹ãƒˆ)
- çµ±åˆãƒ†ã‚¹ãƒˆ: 30æ™‚é–“ (10-15ãƒ†ã‚¹ãƒˆ)
- CI/CD: 10æ™‚é–“

**å‚è€ƒ:** [IMPLEMENTATION-GUIDE.md - ãƒ•ã‚§ãƒ¼ã‚º2](./IMPLEMENTATION-GUIDE.md#phase-2-testing-infrastructure)

---

## ãƒ•ã‚§ãƒ¼ã‚º3: ROS 2æ”¹å–„

### CRIT-09: ãƒ›ãƒ­ãƒãƒŸãƒƒã‚¯ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®šãªã— â±ï¸ 8æ™‚é–“

**å•é¡Œ:** ãƒ¡ã‚«ãƒŠãƒ ãƒ›ã‚¤ãƒ¼ãƒ«ãŒä½¿ç”¨ã•ã‚Œã¦ã„ãªã„ (max_vel_y = 0)

**ä¿®æ­£:** `nav2_params.yaml`ã‚’æ›´æ–°:
```yaml
max_vel_y: 0.15  # æ¨ªç§»å‹•ã‚’æœ‰åŠ¹åŒ–!
acc_lim_y: 2.0
```

---

### CRIT-10: ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆãªã— â±ï¸ 12æ™‚é–“

**å•é¡Œ:** ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãŒç„¡æœŸé™ã«ãƒãƒ³ã‚°ã™ã‚‹å¯èƒ½æ€§

**ä¿®æ­£:** ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒãƒ¼ã«ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆãƒã‚§ãƒƒã‚¯ã‚’è¿½åŠ 

---

### HIGH-02ï½HIGH-08

è©³ç´°ãªå®Ÿè£…ã«ã¤ã„ã¦ã¯ã€[IMPLEMENTATION-GUIDE.md - ãƒ•ã‚§ãƒ¼ã‚º3](./IMPLEMENTATION-GUIDE.md#phase-3-ros-2-best-practices)ã‚’å‚ç…§

---

## å®Œå…¨ãªèª²é¡Œãƒªã‚¹ãƒˆ

å…¨28ä»¶ã®èª²é¡Œã®è©³ç´°ã«ã¤ã„ã¦ã¯ã€ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§:
`../archive/IDENTIFIED-ISSUES-AND-GAPS.md`

**å„ªå…ˆåº¦åˆ¥ã‚µãƒãƒªãƒ¼:**
- ğŸ”´ ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ« (10ä»¶): ãƒ•ã‚§ãƒ¼ã‚º1-2
- ğŸŸ¡ é«˜ (8ä»¶): ãƒ•ã‚§ãƒ¼ã‚º3
- ğŸŸ¢ ä¸­ (7ä»¶): ãƒ•ã‚§ãƒ¼ã‚º4-5
- ğŸ”µ ä½ (3ä»¶): å°†æ¥

---

**é–¢é€£è³‡æ–™:**
- [IMPLEMENTATION-GUIDE.md](./IMPLEMENTATION-GUIDE.md) / [IMPLEMENTATION-GUIDE_ja.md](./IMPLEMENTATION-GUIDE_ja.md) - å„èª²é¡Œã®ä¿®æ­£æ–¹æ³•
- [SYSTEM-ARCHITECTURE.md](./SYSTEM-ARCHITECTURE.md) / [SYSTEM-ARCHITECTURE_ja.md](./SYSTEM-ARCHITECTURE_ja.md) - ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ
- [START-HERE.md](./START-HERE.md) / [START-HERE_ja.md](./START-HERE_ja.md) - æ¦‚è¦

**æœ€çµ‚æ›´æ–°:** 2025-12-02
