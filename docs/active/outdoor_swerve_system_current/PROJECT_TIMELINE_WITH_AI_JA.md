# プロジェクトタイムライン - 屋外車椅子搬送ロボット（AI支援単独開発）

**ドキュメントID:** DOC-TIMELINE-001
**バージョン:** 2.0
**日付:** 2025-12-16
**ステータス:** アクティブ開発タイムライン

---

## エグゼクティブサマリー

本ドキュメントは、**1名の単独開発者がAI支援を活用**（Claude Code、GitHub Copilotなど）して屋外車椅子搬送ロボットシステムを開発するための現実的なプロジェクトタイムラインを提供します。

**主要前提条件:**
- **チーム規模:** 1名の単独開発者（開発者 + レビュアー + ユーザー - すべての役割）
- **AI加速:** コード生成、テスト、デバッグ、ドキュメント作成において2-3倍の生産性向上
- **ParcelPal経験:** コード再利用0%、アーキテクチャパターン再利用60-70%（実証済みナビゲーション/認識アプローチ、Autowareコード不使用）
- **ハードウェアチーム:** 並行ハードウェア作業、必要時のフィールドテスト支援
- **テストアプローチ:** 開発中のセルフテスト、ハードウェアチームがフィールド検証を支援
- **正式承認なし:** ビルド → テスト → 修正 → イテレートのワークフロー（PRレビュー、承認なし）

**総プロジェクト期間:** 30-32週間（フルタイムで約8ヶ月）

---

## 🚀 32週間開発タイムライン

### **週1-2: セットアップ & 基盤構築**
**内容:** 開発環境、ROS 2ワークスペース、基本インフラ

**活動:**
- Ubuntu 22.04、ROS 2 Humble、依存関係のインストール
- Gitリポジトリ、ワークスペース構造のセットアップ
- シミュレーション環境の作成（Gazeboオプション）
- "Hello World" ROS 2ノード

**AI支援:** 設定ファイル、パッケージセットアップスクリプト、ボイラープレート生成

**成果物:** クリーンなワークスペース、コーディング準備完了

---

### **週3-7: スワーブドライブシステム（5週間）**

#### **週3-4: 逆運動学/順運動学**
- IKソルバー実装（Twist → 4輪状態）
- FKソルバー実装（4輪状態 → Twist）
- 正確性のための単体テスト
- **AI生成:** 数学実装、テストケース

#### **週5: モジュール調整**
- ホイール角度最適化（>90°回転を回避）
- モジュールアライメントロジック
- ステアリング中の速度ランピング
- **AI生成:** アルゴリズム実装、エッジケース処理

#### **週6-7: Nav2コントローラープラグイン + テスト**
- Nav2コントローラーインターフェース実装
- ベロシティガバナー統合
- **ハードウェアチーム:** モーター接続、基本動作テスト
- **バグ修正:** モーターチューニング、タイミング問題
- **成果物:** 全方向移動するロボット

---

### **週8-11: ナビゲーションスタック（4週間）** 💡 **ParcelPalアーキテクチャパターン**

#### **週8-9: NDTローカライゼーション（ゼロから実装）**
- 標準ROS 2を使用してNDTを実装（pcl::NormalDistributionsTransformまたはndt_omp、Autoware不使用）
- 事前構築マップのロード、初期ポーズ設定
- センサーフュージョン（LiDAR + IMU + オドメトリ）
- **ParcelPalが提供:** 実証済みパラメータ範囲、統合パターン
- **AI支援:** NDT統合コード生成、パラメータチューニング、TFデバッグ

#### **週10: Nav2統合**
- Nav2プランナー設定（NavFn、DWB）
- コストマップパラメータチューニング
- **ハードウェアチーム:** テストマップ作成

#### **週11: ウェイポイントナビゲーション + テスト**
- マルチウェイポイントルート実行
- **ハードウェアチーム:** 自律ナビゲーションテスト
- **バグ修正:** ローカライゼーションドリフト、経路計画
- **成果物:** 自律ウェイポイントナビゲーション

---

### **週12-15: 認識システム（4週間）** 💡 **ParcelPalアーキテクチャパターン**

#### **週12-13: 点群処理（ゼロから実装）**
- PCLパイプライン実装（新規コード作成、ParcelPalコピーなし）
- 地面除去（RANSAC）、ボクセルダウンサンプリング、高さフィルタリング
- **ParcelPalが提供:** 実証済みバイナリ検出アプローチ、CPUのみアーキテクチャ
- **AI支援:** PCLフィルタリングコード生成、パラメータチューニング

#### **週14: コストマップ統合**
- フィルタリング済み点群をNav2コストマップに接続
- 障害物インフレーション、占有グリッド
- **ハードウェアチーム:** 屋外障害物検出テスト

#### **週15: テスト + バグ修正**
- 照明問題、誤検出、チューニング
- **バグ修正:** 傾斜での地面除去、動的障害物
- **成果物:** 信頼性の高い障害物回避

---

### **週16-21: ドッキングシステム（6週間）** 🆕 **新サブシステム**

#### **週16-17: ArUco検出**
- デュアルカメラセットアップ、キャリブレーション
- ArUcoマーカー検出（OpenCV）
- ポーズ推定（PnP）
- **AI生成:** OpenCVコード、キャリブレーションツール

#### **週18-19: ビジュアルサーボコントローラー**
- PBVSコントローラー（x、y、θ用PID）
- ドッキング中の速度制限
- **ハードウェアチーム:** マーカー付きテスト車椅子セットアップ

#### **週20: ドッキングステートマシン**
- ステートマシン（IDLE → APPROACH → SEARCH → SERVOING → DOCKED）
- 失敗処理、リトライロジック
- **AI生成:** ステートマシンコード

#### **週21: ドッキングテスト + チューニング**
- **ハードウェアチーム:** 屋外で50回以上のドッキング試行
- 照明変動、精度チューニング
- **バグ修正:** マーカー検出失敗、収束問題
- **成果物:** >80%ドッキング成功率（±5mm）

---

### **週22-24: 安全システム（3週間）**

#### **週22: 安全モニター + ウォッチドッグ**
- 安全スーパーバイザーノード
- すべての重要サブシステムのウォッチドッグ
- 診断情報集約
- **AI生成:** 監視ロジック、タイムアウト処理

#### **週23: 緊急停止統合**
- ハードウェアE-Stop回路統合
- ソフトウェアE-Stopトリガーロジック
- 乗客検出センサー
- **ハードウェアチーム:** E-Stop応答時間テスト（<100ms）

#### **週24: 安全テスト + 検証**
- フォールトインジェクションテスト（LiDAR故障、ローカライゼーション喪失）
- 速度制限の強制
- **バグ修正:** 誤E-Stopトリガー、エッジケース
- **成果物:** すべての重要テストに合格した安全システム

---

### **週25-28: UI & eHMI（4週間）**

#### **週25-26: タッチスクリーンUI**
- React/Next.js UIセットアップ
- ROS 2へのRosbridge接続
- ミッションステータス表示、ウェイポイント選択
- **AI生成:** Reactコンポーネント、UIロジック

#### **週27: eHMIファームウェア（ESP32-S3）**
- LEDストリップ制御（WS2812B）
- オーディオ再生（I2S）
- メインコンピュータとのシリアル通信
- **AI生成:** ESP32 Arduino/PlatformIOコード

#### **週28: UI/eHMIテスト + 仕上げ**
- **ハードウェアチーム:** UI使いやすさ、eHMI視認性テスト
- 車椅子固有状態（21-28）
- **成果物:** 機能的なUI & eHMI

---

### **週29-31: システム統合 & フィールドテスト（3週間）**

#### **週29: フルシステム統合**
- すべてのサブシステムが一緒に動作
- エンドツーエンドミッションテスト
- **バグ修正:** サブシステム間通信、タイミング

#### **週30-31: フィールドテスト & バグ修正**
- **ハードウェアチーム:** 集中的な屋外テスト
- 天候、地形、エッジケース
- パフォーマンスチューニング（バッテリー寿命、速度）
- **成果物:** 信頼性の高いフルミッション実行

---

### **週32: ドキュメント & デプロイ（1週間）**
- コードのクリーンアップ、コメント追加
- 設定ファイルの更新
- デプロイ手順
- ハードウェアチームへの引き渡し
- **成果物:** 本番環境対応システム

---

## 📊 タイムラインサマリー

| フェーズ | 週 | 主要成果物 | ParcelPalの影響 |
|-------|-----|----------|----------------|
| セットアップ | 1-2 | 開発環境準備完了 | N/A |
| スワーブドライブ | 3-7 | 全方向移動 | 🆕 新規 |
| ナビゲーション | 8-11 | 自律ウェイポイントナビゲーション | 💡 70%アーキテクチャパターン |
| 認識 | 12-15 | 障害物回避 | 💡 60%アーキテクチャパターン |
| ドッキング | 16-21 | 精密車椅子ドッキング | 🆕 新規 |
| 安全 | 22-24 | 安全システム検証済み | 💡 30%パターン |
| UI/eHMI | 25-28 | ユーザーインターフェース & eHMI | 🆕 新規 |
| 統合 | 29-31 | フルシステムテスト済み | N/A |
| デプロイ | 32 | 本番環境対応 | N/A |
| **合計** | **32週** | **完全なシステム** | **コード0%、アイデア約50%** |

---

## 組み込まれた現実的なバッファ

- ✅ 各サブシステムに **テスト + バグ修正** のための1-2週間
- ✅ **承認遅延なし** - ビルド、テスト、イテレートのみ
- ✅ **並行ハードウェアチームテスト** - コーディングを継続
- ✅ **AI支援** がコーディング、デバッグ、テストを高速化
- ✅ 予期しない問題のための **バッファ時間**

---

## ワークフロー: ビルド → テスト → 修正 → デプロイ

**正式承認なし、PRレビューなし。あなたは:**
- 開発者（コードを書く）
- レビュアー（コミット前にセルフレビュー）
- テスター（機能を検証）
- ユーザー（要件を定義）

**日次ワークフロー:**
```bash
# 機能開始
git checkout -b feature/swerve-ik

# AI支援でコーディング（Claude Codeがボイラープレート、アルゴリズムを生成）
# ... コーディング ...

# ローカルでセルフテスト
colcon build && colcon test

# セルフレビュー（健全性チェック）
git diff  # 自分の変更をレビュー

# コミットとマージ
git commit -m "単体テスト付きスワーブIKソルバー追加"
git checkout main
git merge feature/swerve-ik

# 完了！ PR不要、承認不要。
```

---

## AI生産性乗数

| 活動 | AI不使用 | AI使用 | 高速化 |
|----------|-----------|---------|---------|
| コード生成 | 100% | 40-50% | **2-2.5倍** |
| 単体テスト作成 | 100% | 30-40% | **2.5-3倍** |
| ドキュメント作成 | 100% | 35-45% | **2-2.5倍** |
| デバッグ | 100% | 50-70% | **1.5-2倍** |
| **全体** | **100%** | **45-55%** | **約2-2.5倍** |

---

## マイルストーン & 成果物

| マイルストーン | 週 | 成果物 | 受入基準 |
|-----------|------|-------------|---------------------|
| **M1: スワーブドライブ** | 7 | 全方向移動 | 屋外動作検証済み |
| **M2: ナビゲーション** | 11 | 自律ナビゲーション | NDT ±10cm、ウェイポイント動作 |
| **M3: 認識** | 15 | 障害物回避 | >90%検出率 |
| **M4: ドッキング** | 21 | 精密ドッキング | ±5mm、>80%成功 |
| **M5: 安全** | 24 | 安全検証済み | E-Stop <100ms、ウォッチドッグOK |
| **M6: UI/eHMI** | 28 | UI & eHMI機能的 | ミッション制御動作 |
| **M7: 統合** | 31 | フルシステムテスト済み | エンドツーエンドミッション合格 |
| **M8: 本番環境** | 32 | 本番環境対応 | デプロイ済み、文書化済み |

---

## 成功指標

### 開発速度
- **目標:** AI支援で4-6週間ごとに1つの主要サブシステム
- **測定:** 機能完了追跡

### コード品質
- **目標:** 80%以上の単体テストカバレッジ（AI生成テスト）
- **測定:** コードカバレッジレポート（gcov、pytest-cov）

### フィールドテスト成功率
- **目標:** 最終的に>80%のミッション成功率
- **測定:** ミッションログ、成功/失敗追跡

### タイムライン遵守
- **目標:** 32週間以内に完了
- **測定:** 週次マイルストーン追跡

---

## リスク管理

| リスク | 影響 | 緩和策 |
|------|--------|------------|
| NDT屋外ドリフト | +2週間 | 早期屋外テスト、AIパラメータチューニング |
| ArUco屋外検出 | +2週間 | デュアルカメラ、AI最適化 |
| ハードウェア遅延 | +2-4週間 | 早期発注、バックアップサプライヤー |
| CPU性能 | +1週間 | 早期プロファイリング、AI最適化 |

**コンティンジェンシーバッファ:** タイムラインには既に現実的なテスト/デバッグ時間が含まれています

**推奨:** 2週間のバッファを含めて32-34週間を計画

---

**ドキュメントステータス:** アクティブ - リビングドキュメント
**最終更新:** 2025-12-16
**管理者:** あなた（単独開発者）
**レビュー頻度:** 週次セルフレビュー、必要に応じて調整

---

**週1の準備はできていますか？** 🚀
