# システム統合要件

**プロジェクト:** 屋外車椅子輸送ロボット - マルチチームシステム
**文書タイプ:** 統合要件仕様
**チーム責任:** システムアーキテクト（全チーム調整）
**日付:** 2025年12月16日
**バージョン:** 1.0

---

## 統合ポイント

### 1. 車両 ↔ フリート管理統合

| ID | 要件 | 優先度 | 受入基準 |
|----|-------------|----------|---------------------|
| INT-VEH-FLEET-001 | 車両はREST APIとWebSocket経由でTVMサーバーと通信すること | CRITICAL | 双方向通信が検証済み |
| INT-VEH-FLEET-002 | 車両は5秒ごとにテレメトリを送信すること（位置、バッテリー、ステータス） | CRITICAL | テレメトリレイテンシ<5秒 |
| INT-VEH-FLEET-003 | 車両はTVMサーバーからのミッションコマンドを1秒以内に受け取ること | CRITICAL | コマンド処理時間<1秒 |
| INT-VEH-FLEET-004 | 車両はネットワーク障害時にテレメトリをバッファリングすること（最大1時間） | HIGH | バッファリングが機能的 |
| INT-VEH-FLEET-005 | 車両は接続復旧時にバッファされたデータをアップロードすること | HIGH | データ同期が機能的 |

### 2. 車両ソフトウェア ↔ ハードウェア統合

| ID | 要件 | 優先度 | 受入基準 |
|----|-------------|----------|---------------------|
| INT-SW-HW-001 | ROS 2ノードは10msサイクルでCANバス経由でモーターコントローラーと通信すること | CRITICAL | CANレイテンシ<10ms |
| INT-SW-HW-002 | ROS 2ノードは必要なレートでパブリッシュされたトピック経由でセンサーデータを受信すること | CRITICAL | すべてのセンサーがパブリッシュ中 |
| INT-SW-HW-003 | 緊急停止はハードウェアからすべてのROS 2ノードに100ms以内に伝播すること | CRITICAL | E-stopレイテンシ<100ms |
| INT-SW-HW-004 | バッテリーステータスは1HzでCANバス経由でROS 2にパブリッシュすること | HIGH | BMSデータが利用可能 |

### 3. マルチチーム開発統合

| ID | 要件 | 優先度 | 受入基準 |
|----|-------------|----------|---------------------|
| INT-DEV-001 | チームは統合のために定義されたインターフェースを使用すること（TVM API、ハードウェア-ソフトウェア、ROS 2トピック） | CRITICAL | インターフェース契約が遵守 |
| INT-DEV-002 | インターフェース変更は影響を受けるすべてのチームに1週間前に通知すること | HIGH | 通信プロトコルが遵守 |
| INT-DEV-003 | 統合テストは全チーム出席で毎週実施すること | HIGH | 毎週の統合ミーティング |
| INT-DEV-004 | ブロッキング問題は24時間以内にシステムアーキテクトにエスカレートすること | HIGH | エスカレーションプロセスが遵守 |

### 4. システム全体統合テスト

| ID | 要件 | 優先度 | 受入基準 |
|----|-------------|----------|---------------------|
| INT-TEST-001 | エンドツーエンドミッションテストは毎週実行すること（予約 → ミッション → 完了） | CRITICAL | E2Eテストがパス |
| INT-TEST-002 | マルチ車両テストは毎月実行すること（2台以上の車両、競合なし） | HIGH | マルチ車両動作が検証済み |
| INT-TEST-003 | システム統合は出荷前にFATをパスすること | CRITICAL | FATチェックリスト完了 |
| INT-TEST-004 | システム統合は展開サイトでSATをパスすること | CRITICAL | SAT顧客サインオフ |

---

## 統合スケジュール

| 週 | 統合マイルストーン | 関与チーム | 成果物 |
|------|----------------------|----------------|-------------|
| 1-10 | コンポーネント開発 | 全チーム（独立） | 単体テスト済みコンポーネント |
| 11-15 | インターフェース統合 | Pankaj + Tsuchiya | ROS 2 ↔ ハードウェア検証済み |
| 16-18 | フリート統合 | Pankaj + Unno | 車両 ↔ TVM検証済み |
| 19-20 | システム統合 | 全チーム | 完全システム動作可能 |
| 21-25 | フィールド統合テスト | 全チーム | 実世界検証 |
| 26-28 | FAT + SAT | 全チーム + 顧客 | 受入テスト |

---

## 統合リスクと軽減策

| リスク | 発生可能性 | 影響 | 軽減策 |
|------|-----------|--------|------------|
| チーム間のインターフェース不一致 | Medium | High | 毎週の統合同期、インターフェースバージョニング |
| ネットワークレイテンシ問題（WiFi/LTE） | Medium | Medium | バッファリング実装、シミュレートされたレイテンシでテスト |
| CANバスタイミング競合 | Low | High | 慎重なバススケジューリング、オシロスコープ検証 |
| マルチ車両干渉 | Low | Medium | ジオフェンシング、衝突回避テスト |

---

**合計:** 16統合要件

**関連文書:**
- TVM_API_SPECIFICATION.md
- HARDWARE_SOFTWARE_INTERFACES.md
- SYSTEM_INTEGRATION_ARCHITECTURE.md
- TESTING_REQUIREMENTS.md（統合テストセクション）

**文書終了**
