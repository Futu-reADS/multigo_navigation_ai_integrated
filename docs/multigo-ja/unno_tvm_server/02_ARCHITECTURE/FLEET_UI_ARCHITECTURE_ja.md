# フリートUIアーキテクチャ

**プロジェクト:** 屋外車椅子輸送ロボット - マルチチームシステム
**ドキュメントタイプ:** フリート管理UIアーキテクチャ
**チーム:** Unno（フリート管理）
**日付:** December 16, 2025
**バージョン:** 1.0

---

## フロントエンドアーキテクチャ

```
┌─────────────────────────────────────────────────────────┐
│              React 18 SPA (TypeScript)                  │
│                                                         │
│  ┌─────────────────────────────────────────────────┐  │
│  │           コンポーネント階層                     │  │
│  │                                                 │  │
│  │  App                                            │  │
│  │   ├─ AuthProvider (コンテキスト)               │  │
│  │   ├─ Router (react-router-dom)                 │  │
│  │   │   ├─ Dashboard (マップ + 車両リスト)       │  │
│  │   │   ├─ Missions (アクティブ + 履歴)          │  │
│  │   │   ├─ Reservations (カレンダービュー)       │  │
│  │   │   ├─ Vehicles (管理)                       │  │
│  │   │   ├─ Users (管理者のみ)                    │  │
│  │   │   └─ Settings                              │  │
│  │   └─ WebSocketProvider (リアルタイム更新)     │  │
│  └─────────────────────────────────────────────────┘  │
│                                                         │
│  ┌──────────────┐  ┌──────────────┐  ┌─────────────┐ │
│  │ 状態管理     │  │  APIレイヤー │  │  UIライブラリ│ │
│  │ Redux Toolkit│  │  RTK Query   │  │  Material-UI│ │
│  └──────────────┘  └──────────────┘  └─────────────┘ │
└─────────────────────────────────────────────────────────┘
```

## 技術スタック

- **フレームワーク:** React 18（TypeScript）
- **状態管理:** Redux Toolkit + RTK Query
- **ルーティング:** react-router-dom v6
- **UIフレームワーク:** Material-UI (MUI) v5
- **マップ:** Leaflet.js + react-leaflet
- **チャート:** Recharts
- **リアルタイム:** Socket.io-client
- **ビルド:** Vite
- **テスト:** Vitest + React Testing Library

## 主要機能

### ダッシュボード
- マップ上のリアルタイム車両位置
- フリート統計ウィジェット
- 最近のアラートパネル
- クイックアクションツールバー

### マップコンポーネント
- ステータス色付き車両マーカー
- ナビゲーションパス可視化
- ジオフェンス境界
- ズーム/パンコントロール
- レイヤートグル

### ミッション管理
- ミッション作成ウィザード
- 進行状況付きアクティブミッションリスト
- フィルター付きミッション履歴
- ミッション詳細モーダル

### レスポンシブデザイン
- デスクトップ: 1920×1080（主要）
- タブレット: 1024×768
- モバイル: 375×667（限定機能）

## 状態管理

### Reduxスライス
- `auth` - ユーザー認証状態
- `vehicles` - 車両リストとステータス
- `missions` - ミッションデータ
- `reservations` - 予約カレンダー
- `ui` - UI状態（モーダル、ローディングなど）

### RTK Query API
- `vehiclesApi` - 車両CRUD操作
- `missionsApi` - ミッション管理
- `usersApi` - ユーザー管理（管理者）

## ビルドとデプロイ

- Viteビルド（最適化バンドル）
- AWS S3 + CloudFrontでの静的ホスティング
- GitHub Actions経由のCI/CD
- 環境固有設定（.envファイル）

---

**合計:** FLEET_UI_REQUIREMENTS.mdで109要件をカバー
