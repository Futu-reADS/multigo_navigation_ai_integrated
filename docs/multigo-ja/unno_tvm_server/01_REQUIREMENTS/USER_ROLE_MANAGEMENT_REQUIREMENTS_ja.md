# ユーザーロール管理要件

**文書管理:**
- **文書ID:** FM-USER-REQ-001
- **バージョン:** 1.0
- **日付:** 2025-12-16
- **ステータス:** ドラフト
- **所有者:** Unno（フリート管理チーム）
- **レビュアー:** セキュリティチーム、システム管理者

---

## 1. はじめに

### 1.1 目的

本文書は、フリート管理システムにおけるユーザーロール管理とロールベースアクセス制御（RBAC）の詳細要件を規定する。ユーザーロール、権限、認証メカニズム、アクセス制御ポリシーを定義し、システム機能への安全かつ適切なアクセスを確保する。

### 1.2 範囲

**対象範囲:**
- ユーザーロール定義（Admin、Caregiver、Nurse、Operator）
- 権限マトリクス（詳細な機能レベル権限）
- ユーザーアカウントライフサイクル（作成、変更、無効化）
- 認証メカニズム（パスワードベース、オプションSSO）
- セッション管理とタイムアウトポリシー
- ロールベースUIカスタマイゼーション
- セキュリティイベントの監査ログ
- パスワードポリシーとセキュリティ制御
- セルフサービス機能（パスワードリセット、プロファイル更新）

**対象外:**
- ネットワークレベルセキュリティ（ファイアウォール、VPN）
- データベースセキュリティ（TVM_SERVER_REQUIREMENTS.mdで規定）
- 車両認証（個別の車両資格情報）

### 1.3 定義と略語

| 用語 | 定義 |
|------|------------|
| RBAC | ロールベースアクセス制御 |
| Admin | 完全なシステムアクセスを持つ管理者 |
| Caregiver | 介護士 - 歩行支援を提供するスタッフメンバー |
| Nurse | 看護士 - 薬剤配送のための医療スタッフ |
| Operator | 車両を監視するフリートオペレーター |
| Permission | 特定機能への詳細なアクセス権 |
| Session | タイムアウト付き認証済みユーザーセッション |
| SSO | シングルサインオン（オプション統合） |

### 1.4 参考文献

- FLEET_MANAGEMENT_REQUIREMENTS.md - 親文書
- RESERVATION_SYSTEM_REQUIREMENTS.md - 予約機能
- TVM_SERVER_REQUIREMENTS.md - 認証実装

---

## 2. システム概要

### 2.1 ユーザーロール

**ロール階層:**
```
Admin（完全アクセス）
├── Operator（フリート管理）
├── Nurse（医療サービス）
└── Caregiver（入居者ケア）
```

**ロールの目的:**
- **Admin:** システム構成、ユーザー管理、完全なデータアクセス
- **Operator:** 車両監視、配車オーバーライド、キュー管理
- **Nurse:** 薬剤配送予約、患者輸送、緊急優先度
- **Caregiver:** 歩行支援予約、入居者輸送、通常優先度

---

## 3. 機能要件

### 3.1 ロール定義

#### 3.1.1 Adminロール

| 要件ID | 優先度 | 要件 | 受入基準 |
|--------|----------|-------------|---------------------|
| USER-ROLE-ADMIN-001 | CRITICAL | Adminロールは完全なシステムアクセスを持たなければならない | • すべての機能がアクセス可能<br>• データ可視性に制限なし<br>• すべてのユーザーを管理可能 |
| USER-ROLE-ADMIN-002 | HIGH | Adminはユーザーアカウントを管理しなければならない（作成、編集、無効化） | • ユーザー管理インターフェース<br>• ロールの割り当て/変更が可能<br>• パスワードリセットが可能 |
| USER-ROLE-ADMIN-003 | HIGH | Adminはすべての監査ログとレポートにアクセスしなければならない | • 完全な監査証跡の可視性<br>• CSV/JSONへのログエクスポート<br>• ユーザー、アクション、日付でフィルタリング |
| USER-ROLE-ADMIN-004 | HIGH | Adminはシステム設定を構成しなければならない | • 運用時間、ウェイポイント、車両パラメータ<br>• レート制限、通知テンプレート<br>• 重要な変更には確認が必要 |
| USER-ROLE-ADMIN-005 | MEDIUM | Adminはキュー順序をオーバーライドしなければならない | • 予約を手動で並べ替え<br>• 正当化メモが必要<br>• 監査証跡にログ記録 |

#### 3.1.2 Operatorロール

| 要件ID | 優先度 | 要件 | 受入基準 |
|--------|----------|-------------|---------------------|
| USER-ROLE-OPR-001 | HIGH | Operatorロールはすべての車両をリアルタイムで監視しなければならない | • フリートダッシュボードへのアクセス<br>• 車両ステータス、位置、バッテリー<br>• システム設定は変更不可 |
| USER-ROLE-OPR-002 | HIGH | Operatorは車両を手動で配車しなければならない | • 手動配車インターフェース<br>• 車両とミッションを選択<br>• 自動割り当てをバイパス |
| USER-ROLE-OPR-003 | HIGH | Operatorはアクティブミッションをキャンセルしなければならない | • 進行中ミッションのキャンセルボタン<br>• 確認が必要<br>• 監査証跡にログ記録 |
| USER-ROLE-OPR-004 | MEDIUM | Operatorはすべての予約を閲覧しなければならない | • 予約リストへの読み取り専用アクセス<br>• 予約の作成/変更は不可<br>• キューステータスを閲覧可能 |
| USER-ROLE-OPR-005 | MEDIUM | Operatorは緊急停止コマンドを送信しなければならない | • 各車両の緊急停止ボタン<br>• 2段階確認が必要<br>• 重要イベントとしてログ記録 |

#### 3.1.3 Nurseロール

| 要件ID | 優先度 | 要件 | 受入基準 |
|--------|----------|-------------|---------------------|
| USER-ROLE-NURSE-001 | CRITICAL | Nurseロールは薬剤配送予約を作成しなければならない | • 予約フォームへのアクセス<br>• 薬剤配送タイプ<br>• 優先度選択（通常、緊急、救急） |
| USER-ROLE-NURSE-002 | HIGH | Nurseは重要配送に救急優先度を設定しなければならない | • 救急優先度オプション<br>• 確認ダイアログが必要<br>• 即座のキュージャンプ |
| USER-ROLE-NURSE-003 | HIGH | Nurseは自分の予約履歴を閲覧しなければならない | • "自分の予約" ページ<br>• 日付、ステータスでフィルタリング<br>• 他の看護士の予約は閲覧不可 |
| USER-ROLE-NURSE-004 | MEDIUM | Nurseは予約ステータスの通知を受信しなければならない | • アプリ内通知<br>• メール通知（オプション）<br>• ステータス変更: 配車、完了、失敗 |
| USER-ROLE-NURSE-005 | MEDIUM | Nurseは車両位置を閲覧しなければならない（読み取り専用） | • 車両位置のマップビュー<br>• 到着時間の推定に役立つ<br>• 車両制御は不可 |

#### 3.1.4 Caregiverロール

| 要件ID | 優先度 | 要件 | 受入基準 |
|--------|----------|-------------|---------------------|
| USER-ROLE-CARE-001 | CRITICAL | Caregiverロールは歩行支援予約を作成しなければならない | • 予約フォームへのアクセス<br>• 歩行支援タイプ<br>• 通常優先度（救急オプションなし） |
| USER-ROLE-CARE-002 | HIGH | Caregiverは自分の予約履歴を閲覧しなければならない | • Nurseと同じ（分離されたビュー）<br>• 他の介護士の予約は閲覧不可<br>• CSVへエクスポート |
| USER-ROLE-CARE-003 | MEDIUM | Caregiverは自分の保留予約を変更しなければならない | • 配車前に時間、ウェイポイントを編集<br>• 配車後は変更不可<br>• 作成時と同じ検証 |
| USER-ROLE-CARE-004 | MEDIUM | Caregiverは自分の保留予約をキャンセルしなければならない | • キャンセルボタン<br>• 確認ダイアログ<br>• タイムスロットが解放される |

---

### 3.2 権限マトリクス

#### 3.2.1 詳細権限

| 要件ID | 優先度 | 要件 | 受入基準 |
|--------|----------|-------------|---------------------|
| USER-PERM-MATRIX-001 | CRITICAL | システムはすべての機能で権限マトリクスを強制しなければならない | • サーバー側権限チェック<br>• 権限不足の場合は403 Forbidden<br>• クライアントは非承認機能を非表示（UX） |
| USER-PERM-MATRIX-002 | HIGH | システムは詳細権限を定義しなければならない | • 権限: view_dashboard、create_reservation、cancel_mission、manage_users、emergency_stop、view_analytics、configure_system<br>• 各権限は独立して割り当て可能<br>• データベースに保存 |
| USER-PERM-MATRIX-003 | HIGH | システムは権限をロールにマップしなければならない | • Admin: すべての権限<br>• Operator: view_dashboard、cancel_mission、emergency_stop<br>• Nurse: create_reservation（medicine）、view_dashboard（制限付き）<br>• Caregiver: create_reservation（walking）、view_own_reservations |

**権限マトリクステーブル:**

| 権限 | Admin | Operator | Nurse | Caregiver |
|------------|-------|----------|-------|-----------|
| view_dashboard | ✅ | ✅ | ✅ (制限付き) | ✅ (制限付き) |
| view_all_vehicles | ✅ | ✅ | ✅ (読み取り専用) | ❌ |
| create_reservation | ✅ | ❌ | ✅ (medicine) | ✅ (walking) |
| modify_own_reservation | ✅ | ❌ | ✅ | ✅ |
| modify_any_reservation | ✅ | ✅ | ❌ | ❌ |
| cancel_mission | ✅ | ✅ | ❌ | ❌ |
| emergency_stop | ✅ | ✅ | ❌ | ❌ |
| manual_dispatch | ✅ | ✅ | ❌ | ❌ |
| manage_users | ✅ | ❌ | ❌ | ❌ |
| configure_system | ✅ | ❌ | ❌ | ❌ |
| view_analytics | ✅ | ✅ | ❌ | ❌ |
| view_audit_logs | ✅ | ❌ | ❌ | ❌ |
| override_queue | ✅ | ✅ | ❌ | ❌ |

---

### 3.3 ユーザーアカウント管理

#### 3.3.1 ユーザーアカウント作成（Adminのみ）

| 要件ID | 優先度 | 要件 | 受入基準 |
|--------|----------|-------------|---------------------|
| USER-MGMT-CREATE-001 | HIGH | Adminは新しいユーザーアカウントを作成しなければならない | • フォーム: ユーザー名、メール、パスワード、ロール、氏名、部門<br>• 検証: すべてのフィールドが必須<br>• 確認が表示される |
| USER-MGMT-CREATE-002 | HIGH | システムは一意のユーザー名とメールを強制しなければならない | • データベース制約<br>• 重複の場合はエラーメッセージ<br>• 大文字小文字を区別しないチェック |
| USER-MGMT-CREATE-003 | HIGH | システムは作成時にパスワード複雑性を強制しなければならない | • 最低8文字<br>• 1大文字、1小文字、1数字、1特殊文字<br>• 一般的なパスワードと一致不可（ブラックリスト） |
| USER-MGMT-CREATE-004 | MEDIUM | システムは新しいユーザーにウェルカムメールを送信しなければならない | • メールに含む: ユーザー名、一時パスワード、ログインリンク<br>• 初回ログイン時にパスワード変更を強制<br>• 5分以内にメール送信 |

#### 3.3.2 ユーザーアカウント変更（Adminのみ）

| 要件ID | 優先度 | 要件 | 受入基準 |
|--------|----------|-------------|---------------------|
| USER-MGMT-EDIT-001 | HIGH | Adminは既存のユーザーアカウントを編集しなければならない | • 変更可能: メール、ロール、氏名、部門、アクティブステータス<br>• ユーザー名は変更不可（不変ID）<br>• 自分のAdminロールは編集不可（ロックアウト防止） |
| USER-MGMT-EDIT-002 | HIGH | システムはすべてのユーザーアカウント変更をログ記録しなければならない | • 監査ログエントリ: タイムスタンプ、admin_user、modified_user、field_changed、old_value、new_value<br>• 管理者が閲覧可能<br>• エクスポート可能 |
| USER-MGMT-EDIT-003 | MEDIUM | システムはアカウント変更をユーザーに通知しなければならない | • ロールまたはメール変更時のメール通知<br>• 重要な変更のセキュリティ警告<br>• 不正な場合はユーザーが管理者に連絡可能 |

#### 3.3.3 ユーザーアカウント無効化（Adminのみ）

| 要件ID | 優先度 | 要件 | 受入基準 |
|--------|----------|-------------|---------------------|
| USER-MGMT-DEACT-001 | HIGH | Adminはユーザーアカウントを無効化しなければならない | • 無効化ボタン（削除ではない）<br>• 確認ダイアログ<br>• 無効化されるとユーザーはログイン不可 |
| USER-MGMT-DEACT-002 | HIGH | システムは無効化されたユーザーのデータを保持しなければならない | • 予約履歴が保持される<br>• 監査ログが保持される<br>• 後でアカウントを再有効化可能 |
| USER-MGMT-DEACT-003 | MEDIUM | システムは無効化時に保留予約をキャンセルしなければならない | • すべての保留予約が自動キャンセル<br>• 影響を受ける他のユーザーに通知送信<br>• アクティブミッションは完了を許可 |

---

### 3.4 認証

#### 3.4.1 パスワードベース認証

| 要件ID | 優先度 | 要件 | 受入基準 |
|--------|----------|-------------|---------------------|
| USER-AUTH-PWD-001 | CRITICAL | システムはユーザー名とパスワードでユーザーを認証しなければならない | • 検証付きログインフォーム<br>• パスワードはbcryptでハッシュ化（コスト ≥12）<br>• 平文パスワードは保存しない |
| USER-AUTH-PWD-002 | CRITICAL | システムは認証成功時にJWTトークンを発行しなければならない | • トークン有効期限: 24時間<br>• httpOnlyクッキーに保存<br>• 含む: user_id、role、permissions |
| USER-AUTH-PWD-003 | HIGH | システムはログイン試行のレート制限を実装しなければならない | • 15分間にユーザー名あたり最大5回の失敗<br>• 5回失敗後15分間ロックアウト<br>• 管理者がアカウントをロック解除可能 |
| USER-AUTH-PWD-004 | HIGH | システムはすべての認証イベントをログ記録しなければならない | • 成功: タイムスタンプ、user_id、IPアドレス<br>• 失敗: タイムスタンプ、ユーザー名、IPアドレス、理由<br>• 不審な活動を監視 |

#### 3.4.2 パスワードリセット

| 要件ID | 優先度 | 要件 | 受入基準 |
|--------|----------|-------------|---------------------|
| USER-AUTH-RESET-001 | HIGH | システムはセルフサービスパスワードリセットを提供しなければならない | • ログインページに "パスワードを忘れた" リンク<br>• リセットリンク付きメール（トークンは1時間で期限切れ）<br>• ユーザーが新しいパスワードを設定 |
| USER-AUTH-RESET-002 | HIGH | システムはリセット時にパスワード複雑性を強制しなければならない | • 作成時と同じルール<br>• 過去3つのパスワードは再利用不可<br>• リアルタイムの検証フィードバック |
| USER-AUTH-RESET-003 | MEDIUM | Adminはユーザーパスワードを手動でリセットしなければならない | • 一時パスワードを生成<br>• ユーザーにメール送信<br>• 次回ログイン時にパスワード変更を強制 |

#### 3.4.3 セッション管理

| 要件ID | 優先度 | 要件 | 受入基準 |
|--------|----------|-------------|---------------------|
| USER-AUTH-SESSION-001 | HIGH | システムはセッションタイムアウトを実装しなければならない | • タイムアウト: 8時間の非アクティブ<br>• タイムアウト5分前に警告<br>• "セッション延長" ボタン |
| USER-AUTH-SESSION-002 | HIGH | システムはユーザーがログアウトできるようにしなければならない | • ナビゲーションにログアウトボタン<br>• JWTトークンを無効化<br>• ログインページにリダイレクト |
| USER-AUTH-SESSION-003 | MEDIUM | システムは有効期限前にJWTトークンを更新しなければならない | • トークン有効期間の80%で自動更新（24時間トークンで19.2時間）<br>• ユーザーには透過的<br>• 更新失敗時はログアウト |

---

### 3.5 ロールベースUIカスタマイゼーション

| 要件ID | 優先度 | 要件 | 受入基準 |
|--------|----------|-------------|---------------------|
| USER-UI-CUSTOM-001 | HIGH | システムはログイン時にロールに適したダッシュボードを表示しなければならない | • Admin: すべてのウィジェット付き完全ダッシュボード<br>• Operator: フリート監視ダッシュボード<br>• Nurse/Caregiver: 予約中心のビュー |
| USER-UI-CUSTOM-002 | HIGH | システムは非承認機能をUIで非表示にしなければならない | • 権限のない機能は表示されない<br>• メニュー項目は非表示/グレーアウト<br>• ユーザーの混乱を防止 |
| USER-UI-CUSTOM-003 | MEDIUM | システムはナビゲーションにロールバッジを表示しなければならない | • バッジは現在のロールを表示（例: "Admin"、"Nurse"）<br>• 色分け（赤=Admin、青=Operator、緑=Nurse/Caregiver）<br>• 常に表示 |
| USER-UI-CUSTOM-004 | LOW | システムはユーザーがダッシュボードレイアウトをカスタマイズできるようにしなければならない（ロールが許可する場合） | • ドラッグ&ドロップウィジェット<br>• ユーザーごとに保存<br>• AdminとOperatorのみ |

---

### 3.6 監査ログ

| 要件ID | 優先度 | 要件 | 受入基準 |
|--------|----------|-------------|---------------------|
| USER-AUDIT-001 | CRITICAL | システムはすべてのセキュリティ関連イベントをログ記録しなければならない | • イベント: ログイン、ログアウト、ログイン失敗、パスワード変更、ロール変更、権限変更、ユーザー作成/編集/無効化<br>• フィールド: タイムスタンプ、user_id、IP、アクション、結果<br>• 不変のログエントリ |
| USER-AUDIT-002 | HIGH | システムはすべての管理アクションをログ記録しなければならない | • ユーザー管理、システム構成、キューオーバーライド<br>• 変更前/変更後の値を含む<br>• 管理者、アクション、日付でフィルタリング可能 |
| USER-AUDIT-003 | MEDIUM | システムは監査ログを最低90日間保持しなければならない | • 設定可能な保持期間（デフォルト90日）<br>• コールドストレージに自動アーカイブ<br>• ユーザーによる削除不可 |
| USER-AUDIT-004 | MEDIUM | システムは監査ログの検索とエクスポートを提供しなければならない | • 検索: ユーザー、アクション、日付範囲<br>• CSV/JSONにエクスポート<br>• 管理者のみアクセス |

---

### 3.7 パスワードポリシー

| 要件ID | 優先度 | 要件 | 受入基準 |
|--------|----------|-------------|---------------------|
| USER-PWD-POLICY-001 | HIGH | システムはパスワード複雑性要件を強制しなければならない | • 最小8文字、最大128文字<br>• 1大文字、1小文字、1数字、1特殊文字（!@#$%^&*）<br>• クライアントとサーバーでチェック |
| USER-PWD-POLICY-002 | HIGH | システムは一般的なパスワードの使用を防止しなければならない | • ブラックリスト: password123、admin、qwertyなど<br>• 上位10,000の一般的なパスワードに対してチェック<br>• エラーメッセージ: "パスワードが一般的すぎます" |
| USER-PWD-POLICY-003 | MEDIUM | システムはパスワード有効期限を強制しなければならない（オプション） | • 設定可能な有効期限（デフォルト: 無効）<br>• 有効の場合: 90日有効期限<br>• 有効期限7日前に警告 |
| USER-PWD-POLICY-004 | MEDIUM | システムはパスワード再利用を防止しなければならない | • 過去3つのパスワードは再利用不可<br>• パスワード履歴を保存（ハッシュ化）<br>• パスワード変更時にチェック |

---

### 3.8 セルフサービス機能

| 要件ID | 優先度 | 要件 | 受入基準 |
|--------|----------|-------------|---------------------|
| USER-SELF-PROFILE-001 | MEDIUM | ユーザーは自分のプロファイル情報を更新しなければならない | • フィールド: 氏名、メール、言語設定、通知設定<br>• 変更不可: ユーザー名、ロール<br>• メール変更には確認が必要 |
| USER-SELF-PROFILE-002 | MEDIUM | ユーザーは自分のパスワードを変更しなければならない | • 現在のパスワードが必要<br>• 新しいパスワードの複雑性がチェックされる<br>• 確認メール送信 |
| USER-SELF-NOTIF-001 | MEDIUM | ユーザーは通知設定を構成しなければならない | • 有効化/無効化: メール通知、アプリ内通知、リマインダー<br>• イベントごとの設定（予約確認、配車、完了）<br>• ユーザープロファイルに保存 |

---

## 4. 非機能要件

### 4.1 セキュリティ

| 要件ID | 優先度 | 要件 | 受入基準 |
|--------|----------|-------------|---------------------|
| USER-SEC-001 | CRITICAL | システムはすべての認証リクエストにHTTPSを使用しなければならない | • TLS 1.2+が強制される<br>• HTTPはHTTPSにリダイレクト<br>• HSTSヘッダーが有効 |
| USER-SEC-002 | CRITICAL | システムはブルートフォース攻撃を防止しなければならない | • レート制限（15分に5回の試行）<br>• 3回失敗後にCAPTCHA（オプション）<br>• アカウントロックアウトメカニズム |
| USER-SEC-003 | HIGH | システムはCSRF保護を実装しなければならない | • すべてのフォームにCSRFトークン<br>• SameSiteクッキー属性<br>• サーバー側で検証 |
| USER-SEC-004 | HIGH | システムはユーザー入力をサニタイズしなければならない | • XSS防止（HTMLエスケープ）<br>• SQLインジェクション防止（パラメータ化クエリ）<br>• すべてのフィールドで入力検証 |

### 4.2 性能

| 要件ID | 優先度 | 要件 | 受入基準 |
|--------|----------|-------------|---------------------|
| USER-PERF-001 | HIGH | ログインは2秒以内に完了しなければならない | • 認証情報送信からダッシュボード読み込みまで<br>• 認証とトークン生成を含む<br>• 95パーセンタイル <2秒 |
| USER-PERF-002 | MEDIUM | 権限チェックはAPI性能を低下させてはならない | • リクエストあたりのオーバーヘッド <50ms<br>• 権限はJWTにキャッシュ<br>• 権限チェックごとにデータベースクエリなし |

---

## 5. テスト要件

| テストタイプ | カバレッジ | 受入 |
|-----------|----------|------------|
| ユニットテスト | ≥80% コードカバレッジ | 権限ロジック、パスワード検証、ロールチェック |
| セキュリティテスト | OWASP Top 10 | 認証/承認に重大な脆弱性なし |
| 統合テスト | 異なるロールのAPIエンドポイント | 正しい権限強制 |
| ペネトレーションテスト | ログイン、セッション管理、特権昇格 | エクスプロイトが見つからない |

---

## 6. トレーサビリティマトリクス

| 要件カテゴリ | 要件数 | 優先度分布 |
|---------------------|-------------------|----------------------|
| ロール定義 | 18 | CRITICAL: 3、HIGH: 11、MEDIUM: 4 |
| 権限マトリクス | 3 | CRITICAL: 1、HIGH: 2 |
| ユーザーアカウント管理 | 10 | HIGH: 7、MEDIUM: 3 |
| 認証 | 11 | CRITICAL: 3、HIGH: 7、MEDIUM: 1 |
| ロールベースUI | 4 | HIGH: 2、MEDIUM: 1、LOW: 1 |
| 監査ログ | 4 | CRITICAL: 1、HIGH: 1、MEDIUM: 2 |
| パスワードポリシー | 4 | HIGH: 2、MEDIUM: 2 |
| セルフサービス | 3 | MEDIUM: 3 |
| 非機能（セキュリティ） | 4 | CRITICAL: 2、HIGH: 2 |
| 非機能（性能） | 2 | HIGH: 1、MEDIUM: 1 |
| **合計** | **63** | **CRITICAL: 10、HIGH: 33、MEDIUM: 19、LOW: 1** |

---

## 7. 前提条件と依存関係

### 7.1 前提条件

1. ユーザーアカウントは内部管理（当初LDAP/Active Directory統合なし）
2. 通知用メールサーバーが利用可能
3. ユーザーは一意のメールアドレスを持つ
4. 施設が初期ユーザーリスト（氏名、ロール）を提供

### 7.2 依存関係

1. TVM_SERVER_REQUIREMENTS.md（認証実装）
2. FLEET_MANAGEMENT_REQUIREMENTS.md（UI機能）
3. ユーザー/ロールテーブル付きデータベースサーバー

---

## 8. 未解決課題とリスク

### 8.1 未解決課題

| ID | 課題 | 所有者 | 目標解決 |
|----|-------|-------|-------------------|
| USER-ISSUE-001 | SSO統合要件（将来の拡張） | Unno | 第5週 |
| USER-ISSUE-002 | 多要素認証（MFA）要件 | セキュリティチーム | 第5週 |

### 8.2 リスク

| リスク | 確率 | 影響 | 軽減策 |
|------|------------|--------|------------|
| Adminアカウントロックアウト（パスワード忘れ） | LOW | HIGH | スーパー管理者回復プロセス、管理者は他の管理者をリセット可能 |
| 特権昇格脆弱性 | LOW | CRITICAL | セキュリティテスト、コードレビュー、ペネトレーションテスト |
| セッションハイジャック | LOW | HIGH | httpOnlyクッキー、HTTPS、CSRF保護 |

---

## 9. 改訂履歴

| バージョン | 日付 | 作成者 | 変更内容 |
|---------|------|--------|---------|
| 1.0 | 2025-12-16 | Unno | 初版ドラフト - 第3週文書化 |

---

**文書終了**

**要件合計:** 63件
**文書ステータス:** レビュー用ドラフト
**次回レビュー:** 第4週（セキュリティ監査とテスト計画）
