# 電気システム要件

**ドキュメント管理:**
- **ドキュメントID:** ELEC-REQ-001
- **バージョン:** 1.0
- **日付:** 2025-12-16
- **ステータス:** ドラフト
- **オーナー:** Tsuchiya（ハードウェアチーム - 電気リード）
- **レビュアー:** Pankaj（ソフトウェア統合）、安全エンジニア

---

## 1. はじめに

### 1.1 目的

本ドキュメントは、屋外車椅子輸送ロボットの電気システム要件を規定します。これには、配電、モーター制御、バッテリー管理、センサー電源、通信バス、安全回路、電磁両立性（EMC）が含まれます。電気システムは、すべてのロボットサブシステムに安全に電力を供給し、屋外環境での信頼性の高い動作を可能にする必要があります。

### 1.2 範囲

**範囲内:**
- 配電アーキテクチャ（48Vメインバス、24V/12V/5Vレギュレーター）
- バッテリーシステムとバッテリー管理システム（BMS）
- モーターコントローラー（スワーブドライブおよびステアリングモーター）
- センサー電源と信号調整
- 通信バス（モーター/BMS用CANバス、eHMI用UART）
- 安全回路（非常停止、バンパーセンサー、電流制限）
- ワイヤーハーネス設計と仕様
- 電磁両立性（EMC）とノイズ低減
- 接地とシールド

**範囲外:**
- 機械的取り付け（MECHANICAL_REQUIREMENTS.mdでカバー）
- ソフトウェア/ROS 2統合（HARDWARE_SOFTWARE_INTERFACES.mdでカバー）
- eHMI回路設計（EXTERIOR_REQUIREMENTS.md - Kirilの範囲でカバー）

### 1.3 定義と略語

| 用語 | 定義 |
|------|------------|
| BMS | バッテリー管理システム |
| CAN | Controller Area Network（バスプロトコル） |
| UART | Universal Asynchronous Receiver-Transmitter |
| DC-DCコンバーター | 電圧降圧/昇圧コンバーター |
| E-stop | 非常停止（安全回路） |
| PWM | パルス幅変調 |
| EMC | 電磁両立性 |
| LiPo / LiFePO4 | リチウムポリマー / リン酸鉄リチウムバッテリー |

### 1.4 参照

- MECHANICAL_REQUIREMENTS.md - 機械的取り付けと組み立て
- HARDWARE_SOFTWARE_INTERFACES.md - ROS 2トピックとセンサーインターフェース
- TVM_API_SPECIFICATION.md - バッテリーステータスレポート
- EXTERIOR_REQUIREMENTS.md - eHMI電源要件

---

## 2. システム概要

### 2.1 電気アーキテクチャ

```
┌──────────────────────────────────────────────────┐
│            48Vバッテリーパック（20Ah）             │
│              with BMS（CANバス）                   │
└───────┬──────────────────────────────────────────┘
        │
        ├─→ E-STOP回路（ハードワイヤード）
        │
        ├─→ 48Vバス ─→ スワーブドライブモーター（4×）
        │           └→ モーターコントローラー（4×、CANバス）
        │
        ├─→ DC-DC 48V→24V（10A）─→ ステアリングモーター（4×）
        │                        └→ モーターコントローラー（4×、CANバス）
        │
        ├─→ DC-DC 48V→12V（15A）─→ コンピュートユニット（AMD Ryzen）
        │                        └→ LiDAR、カメラ
        │
        ├─→ DC-DC 48V→5V（10A） ─→ IMU、エンコーダー、センサー
        │                        └→ eHMI（ESP32、LED、オーディオ）
        │
        └─→ BMS CANバス ─────────→ コンピュートユニット（バッテリー監視）
```

### 2.2 電力予算

| サブシステム | 電圧 | 電流（標準） | 電流（ピーク） | 電力（W） |
|-----------|---------|-------------------|----------------|-----------|
| スワーブドライブモーター（4×） | 48V | 4A（各1A） | 40A（各10A） | 192W / 1920Wピーク |
| ステアリングモーター（4×） | 24V | 2A（各0.5A） | 8A（各2A） | 48W / 192Wピーク |
| コンピュートユニット | 12V | 8A | 12A | 96W / 144W |
| LiDAR | 12V | 2A | 2.5A | 24W / 30W |
| カメラ（2×） | 12V | 1A（各0.5A） | 1.5A | 12W / 18W |
| IMU + センサー | 5V | 0.5A | 1A | 2.5W / 5W |
| eHMI（ESP32、LED、オーディオ） | 5V / 12V | 2A | 4A | 10W / 48W |
| BMS + その他 | 5V | 0.5A | 1A | 2.5W / 5W |
| **合計** | - | **20A @ 48V** | **69A @ 48V** | **387W / 2,362Wピーク** |

**バッテリー容量:** 48V × 20Ah = 960Wh
**稼働時間（標準）:** 960Wh / 387W = **2.5時間**
**稼働時間（ピーク連続）:** 960Wh / 2,362W = **24分**（まれなシナリオ）

---

## 3. 機能要件

### 3.1 配電

#### 3.1.1 メイン電源バス（48V）

| 要件ID | 優先度 | 要件 | 受入基準 |
|--------|----------|-------------|---------------------|
| ELEC-PWR-MAIN-001 | CRITICAL | システムはメイン電源バスとして48V公称を使用すること | • 電圧範囲: 42V（空）〜54.6V（フル充電）<br>• すべての高電力負荷（モーター）を直接接続<br>• バス電圧はBMSで監視 |
| ELEC-PWR-MAIN-002 | CRITICAL | メイン電源バスには過電流保護用のインラインヒューズを含めること | • ヒューズ定格: 60A（ピーク電流の1.5倍）<br>• 速断型自動車用ヒューズ<br>• 交換可能にアクセス可能 |
| ELEC-PWR-MAIN-003 | HIGH | メイン電源バスには適切なワイヤーゲージを使用すること | • ワイヤーゲージ: 10 AWG（5.26 mm²）以上（48Vバス用）<br>• 60A連続定格<br>• フレキシブルシリコンワイヤー（高撚線数） |

#### 3.1.2 DC-DCコンバーター

| 要件ID | 優先度 | 要件 | 受入基準 |
|--------|----------|-------------|---------------------|
| ELEC-PWR-DCDC-001 | CRITICAL | システムにはステアリングモーター用の48V→24V DC-DCコンバーターを含めること | • 出力: 24V ± 5%、10A連続、15Aピーク<br>• 効率 ≥85%<br>• 過負荷保護 |
| ELEC-PWR-DCDC-002 | CRITICAL | システムにはコンピュートとセンサー用の48V→12V DC-DCコンバーターを含めること | • 出力: 12V ± 5%、15A連続、20Aピーク<br>• 効率 ≥85%<br>• リップル <100mVピークツーピーク |
| ELEC-PWR-DCDC-003 | HIGH | システムには低電力電子機器用の48V→5V DC-DCコンバーターを含めること | • 出力: 5V ± 5%、10A連続、12Aピーク<br>• 効率 ≥80%<br>• USB互換出力 |
| ELEC-PWR-DCDC-004 | HIGH | DC-DCコンバーターには過電圧および低電圧保護を備えること | • 過電圧: >60V入力でシャットダウン<br>• 低電圧: <36V入力でシャットダウン（バッテリー危険的低電圧）<br>• 電圧正常時に自動再起動 |

---

### 3.2 バッテリーシステムとBMS

#### 3.2.1 バッテリーパック仕様

| 要件ID | 優先度 | 要件 | 受入基準 |
|--------|----------|-------------|---------------------|
| ELEC-BAT-PACK-001 | CRITICAL | バッテリーパックは48V公称、最低20Ah容量であること | • 化学: LiFePO4（より安全、長寿命）またはLiPo<br>• 構成: 13S（48V公称用の13セル直列）<br>• エネルギー: ≥960Wh |
| ELEC-BAT-PACK-002 | HIGH | バッテリーパックは60A連続放電をサポートすること | • Cレート: 20Ahバッテリーで3C<br>• バースト: 100A（10秒間）（モーター加速）<br>• セルバランス必須 |
| ELEC-BAT-PACK-003 | HIGH | バッテリーパックには内蔵BMSを含めること | • BMSは監視: セルごとの電圧、電流、温度<br>• バランス電流 ≥200mA/セル<br>• 監視用CANバスインターフェース |
| ELEC-BAT-PACK-004 | MEDIUM | バッテリーパックは充電のために取り外し可能であること | • XT90またはAnderson Powerpoleコネクター<br>• キー付きコネクター（逆極性防止）<br>• 手動取り扱い用最大30kg重量 |

#### 3.2.2 バッテリー管理システム（BMS）

| 要件ID | 優先度 | 要件 | 受入基準 |
|--------|----------|-------------|---------------------|
| ELEC-BMS-001 | CRITICAL | BMSはセルごとの電圧と温度を監視すること | • 電圧精度: ±10mV<br>• 温度精度: ±2°C<br>• サンプリングレート: ≥1 Hz |
| ELEC-BMS-002 | CRITICAL | BMSは過電流または過電圧でバッテリーを切断すること | • 過電流閾値: 100A（設定可能）<br>• 過電圧: セルあたり4.2V（パック54.6V）<br>• 低電圧: セルあたり2.5V（パック32.5V） |
| ELEC-BMS-003 | HIGH | BMSは監視用のCANバスインターフェースを提供すること | • CANバス: 250 kbit/s<br>• メッセージ: SoC、電圧、電流、温度、エラーコード<br>• 更新レート: 1 Hz |
| ELEC-BMS-004 | HIGH | BMSは充電中にセルをバランスすること | • アクティブまたはパッシブバランス<br>• 目標: <50mVセル電圧差<br>• バランス電流 ≥200mA |
| ELEC-BMS-005 | MEDIUM | BMSは充電状態（SoC）を正確に推定すること | • SoC精度: ±5%<br>• クーロンカウンティング + 電圧ベース推定<br>• CAN→コンピュート経由でROS 2に公開 |

---

### 3.3 モーターコントローラー

#### 3.3.1 スワーブドライブモーターコントローラー（4×）

| 要件ID | 優先度 | 要件 | 受入基準 |
|--------|----------|-------------|---------------------|
| ELEC-MOTOR-DRIVE-001 | CRITICAL | 各スワーブドライブモーターには専用のブラシレスモーターコントローラーを備えること | • 入力: 48V公称（36-54V範囲）<br>• 出力: 10A連続、20Aピーク<br>• FOC（フィールド指向制御）またはセンサーレス制御をサポート |
| ELEC-MOTOR-DRIVE-002 | HIGH | ドライブモーターコントローラーはホールセンサーフィードバックをサポートすること | • ホールセンサー付き3相ブラシレスモーター<br>• 速度範囲: 0-1000 RPM<br>• 方向逆転可能 |
| ELEC-MOTOR-DRIVE-003 | HIGH | ドライブモーターコントローラーはCANバス経由で通信すること | • CANバス: 500 kbit/s（モーターネットワーク）<br>• CANopen CiA 402プロファイル（ドライブ制御）<br>• コマンド: 速度、電流制限、有効化/無効化 |
| ELEC-MOTOR-DRIVE-004 | HIGH | ドライブモーターコントローラーには過電流保護を含めること | • 電流制限: 20A（設定可能）<br>• 熱保護（>80°Cでシャットダウン）<br>• 冷却時に自動再起動 |

#### 3.3.2 ステアリングモーターコントローラー（4×）

| 要件ID | 優先度 | 要件 | 受入基準 |
|--------|----------|-------------|---------------------|
| ELEC-MOTOR-STEER-001 | CRITICAL | 各ステアリングモーターには専用のモーターコントローラーを備えること | • 入力: 24V（DC-DCコンバーターから）<br>• 出力: 2A連続、5Aピーク<br>• ステッピングモーターまたはブラシレスサーボをサポート |
| ELEC-MOTOR-STEER-002 | HIGH | ステアリングモーターコントローラーは位置制御を提供すること | • 位置精度: ±0.5°<br>• 応答時間: <200ms（90°回転用）<br>• エンコーダーフィードバック（ステアリング軸の絶対エンコーダー） |
| ELEC-MOTOR-STEER-003 | HIGH | ステアリングモーターコントローラーはCANバス経由で通信すること | • ドライブモーターと同じCANバス（500 kbit/s）<br>• CANopen CiA 402プロファイル（位置制御）<br>• コマンド: 目標角度、速度、トルク制限 |

---

### 3.4 センサー電源と信号調整

#### 3.4.1 LiDAR電源

| 要件ID | 優先度 | 要件 | 受入基準 |
|--------|----------|-------------|---------------------|
| ELEC-SENSOR-LIDAR-001 | HIGH | LiDARは12Vバスから電源供給されること | • 電力: 12V ± 5%、2.5A最大<br>• 専用電源ライン（ノイズの多い負荷と共有しない）<br>• インラインヒューズ: 3A |
| ELEC-SENSOR-LIDAR-002 | MEDIUM | LiDAR電源にはソフトスタート回路を含めること | • 突入電流を<5Aに制限<br>• 電源投入時の電圧低下を防止<br>• リップルフィルタリング用コンデンサーバンク |

#### 3.4.2 カメラ電源

| 要件ID | 優先度 | 要件 | 受入基準 |
|--------|----------|-------------|---------------------|
| ELEC-SENSOR-CAM-001 | HIGH | カメラは12Vバスまたは5V（USB）から電源供給されること | • オプション1: 12Vバレルジャック（専用カメラ）<br>• オプション2: 5V USB（USBカメラ）<br>• 電力予算: 両カメラで合計1.5A |
| ELEC-SENSOR-CAM-002 | MEDIUM | カメラ電源はノイズ低減のためにフィルタリングされること | • 電源ライン上のLCフィルター<br>• USBデータライン上のフェライトビーズ<br>• 画質への影響を防ぐEMI対策 |

#### 3.4.3 IMUとエンコーダー電源

| 要件ID | 優先度 | 要件 | 受入基準 |
|--------|----------|-------------|---------------------|
| ELEC-SENSOR-IMU-001 | HIGH | IMUは5Vバスから電源供給されること | • 電力: 5V ± 5%、<500mA<br>• クリーンな電源（正確な測定のための低ノイズ）<br>• 必要に応じて専用レギュレーター |
| ELEC-SENSOR-ENC-001 | HIGH | 絶対エンコーダー（4×）は5Vバスから電源供給されること | • 電力: 5V、エンコーダーあたり100mA<br>• 合計: 4エンコーダーで400mA<br>• 共有5Vバス可 |

---

### 3.5 通信バス

#### 3.5.1 モーターとBMS用CANバス

| 要件ID | 優先度 | 要件 | 受入基準 |
|--------|----------|-------------|---------------------|
| ELEC-CAN-MOTOR-001 | CRITICAL | モーターCANバスは500 kbit/sで動作すること | • 標準CAN 2.0Bプロトコル<br>• ツイストペアケーブル（CAN_H、CAN_L）<br>• 両端に120Ω終端抵抗 |
| ELEC-CAN-MOTOR-002 | HIGH | モーターCANバスはすべてのモーターコントローラーとコンピュートユニットを接続すること | • ノード: 4×ドライブコントローラー、4×ステアリングコントローラー、コンピュートユニット<br>• 合計: 9ノード<br>• デイジーチェーントポロジー |
| ELEC-CAN-MOTOR-003 | HIGH | モーターCANバスはCANopenプロトコルを使用すること | • CANopen CiA 402デバイスプロファイル（ドライブ制御）<br>• ノードID: Drive FL=1、FR=2、RL=3、RR=4; Steer FL=5、FR=6、RL=7、RR=8<br>• ハートビートメッセージ100msごと |
| ELEC-CAN-BMS-001 | HIGH | BMS CANバスは250 kbit/sで動作すること（別バス） | • BMS専用CANバス<br>• ノード: BMS、コンピュートユニット<br>• 120Ω終端 |

#### 3.5.2 eHMI用UART

| 要件ID | 優先度 | 要件 | 受入基準 |
|--------|----------|-------------|---------------------|
| ELEC-UART-EHMI-001 | HIGH | eHMI UARTは115200ボーで動作すること | • 8データビット、パリティなし、1ストップビット（8N1）<br>• コンピュートユニットUARTからESP32（eHMIコントローラー）への接続<br>• 3.3Vロジックレベル（コンピュートが5Vの場合はレベルシフター） |
| ELEC-UART-EHMI-002 | MEDIUM | eHMI UARTはシールドケーブルを使用すること | • 長さ <3メートル<br>• シールドツイストペア<br>• EMIピックアップ低減 |

---

### 3.6 安全回路

#### 3.6.1 非常停止（E-stop）

| 要件ID | 優先度 | 要件 | 受入基準 |
|--------|----------|-------------|---------------------|
| ELEC-SAFETY-ESTOP-001 | CRITICAL | E-stop回路はハードワイヤード（ソフトウェア制御なし）であること | • E-stopボタン → コンタクター/リレー → モーター電源<br>• すべてのモーターコントローラーへの電力を即座に切断<br>• ラッチング回路（手動リセット必須） |
| ELEC-SAFETY-ESTOP-002 | CRITICAL | E-stopは50ms以内にドライブモーターへの電力を切断すること | • リレー応答時間 <20ms<br>• モーター惰性時間 <30ms<br>• 総停止開始 <50ms |
| ELEC-SAFETY-ESTOP-003 | HIGH | E-stop回路はフェイルセーフ（常時開）であること | • ボタン解放 = E-stop作動<br>• ボタン押下 = 通常動作<br>• 偶発的な再起動防止 |
| ELEC-SAFETY-ESTOP-004 | HIGH | E-stop状態はROS 2に公開されること | • コンピュートユニットへのGPIO入力<br>• トピック: /safety/estop（std_msgs/Bool）<br>• デバウンス（10ms） |

#### 3.6.2 バンパーセンサー

| 要件ID | 優先度 | 要件 | 受入基準 |
|--------|----------|-------------|---------------------|
| ELEC-SAFETY-BUMP-001 | HIGH | バンパーセンサーは常時閉（NC）スイッチを使用すること | • 複数のバンパースイッチを直列接続<br>• いずれかのバンパー接触で回路を開<br>• フェイルセーフ: ワイヤー断線 = バンパートリガー |
| ELEC-SAFETY-BUMP-002 | HIGH | バンパー回路はコンピュートGPIOに接続すること | • GPIO入力（内部プルアップ）<br>• 接触時にグランド<br>• ソフトウェアでデバウンス（20ms） |
| ELEC-SAFETY-BUMP-003 | MEDIUM | バンパーセンサーはソフトウェアE-stopをトリガーすること | • ROS 2ノードが/safety/bumperを監視<br>• モーターにゼロ速度コマンドを送信<br>• ハードワイヤードではない（再開可能） |

---

### 3.7 ワイヤーハーネス設計

#### 3.7.1 ワイヤー仕様

| 要件ID | 優先度 | 要件 | 受入基準 |
|--------|----------|-------------|---------------------|
| ELEC-WIRE-SPEC-001 | HIGH | 電源ワイヤーは電流に適したゲージを使用すること | • 48Vバス: 10 AWG（60A）<br>• 24V: 14 AWG（15A）<br>• 12V: 16 AWG（10A）<br>• 5V: 18 AWG（5A）<br>• 信号: 22-24 AWG |
| ELEC-WIRE-SPEC-002 | HIGH | すべての電源ワイヤーは撚線（フレキシブル）であること | • 高撚線数（10 AWGで≥100撚線）<br>• シリコン絶縁（フレキシブル、耐温度）<br>• カラーコード: 赤（プラス）、黒（グランド）、黄/白（信号） |
| ELEC-WIRE-SPEC-003 | MEDIUM | ワイヤー絶縁は温度と摩耗に定格されること | • 温度定格: -20°C〜+80°C<br>• 耐摩耗（屋外使用）<br>• 耐UV（屋外曝露） |

#### 3.7.2 コネクター

| 要件ID | 優先度 | 要件 | 受入基準 |
|--------|----------|-------------|---------------------|
| ELEC-CONN-001 | HIGH | 高電流コネクターはXT60、XT90、またはAnderson Powerpoleを使用すること | • バッテリー: XT90（90A定格）<br>• モーター: XT60（60A定格）<br>• 逆極性防止のキー付き |
| ELEC-CONN-002 | HIGH | 信号コネクターはJST、Molex、または同等品を使用すること | • CANバス: 4ピンMolex（CAN_H、CAN_L、GND、オプション+V）<br>• UART: 4ピンJST（TX、RX、GND、+3.3V/5V）<br>• センサー: JST-XHまたはJST-PH |
| ELEC-CONN-003 | MEDIUM | すべてのコネクターは≥100嵌合サイクル定格であること | • 耐久性のあるコネクター（金メッキ接点）<br>• ケーブルのストレインリリーフ<br>• 屋外使用のIP54+定格（該当する場合） |

---

### 3.8 電磁両立性（EMC）

#### 3.8.1 ノイズ低減

| 要件ID | 優先度 | 要件 | 受入基準 |
|--------|----------|-------------|---------------------|
| ELEC-EMC-NOISE-001 | HIGH | モーターコントローラー出力はシールドケーブルを使用すること | • 3相モーターワイヤー: シールド<br>• シールドは片端接地（モーターコントローラー）<br>• 放射EMI低減 |
| ELEC-EMC-NOISE-002 | MEDIUM | DC-DCコンバーターは入出力フィルタリングを含めること | • 入力: セラミックコンデンサー（100nF）+ 電解（100µF）<br>• 出力: LCフィルター（フェライトビーズ + コンデンサー）<br>• 伝導EMI低減 |
| ELEC-EMC-NOISE-003 | MEDIUM | CANバスとUARTはツイストペアケーブルを使用すること | • ツイスト: メートルあたり≥20ツイスト<br>• 差動モードノイズ低減<br>• シールドツイストペア推奨 |

#### 3.8.2 接地とシールド

| 要件ID | 優先度 | 要件 | 受入基準 |
|--------|----------|-------------|---------------------|
| ELEC-GND-001 | HIGH | システムは単一点接地（スターグランド）を持つこと | • すべてのサブシステムは中央接地点に接地<br>• シャーシグランドはバッテリーマイナスに接続<br>• グランドループ防止 |
| ELEC-GND-002 | MEDIUM | ケーブルシールドは片端のみで接地すること | • モーターシールド: コントローラーで接地<br>• センサーシールド: コンピュートユニットで接地<br>• シールド内の循環電流防止 |

---

## 4. 非機能要件

### 4.1 信頼性とフォールトトレランス

| 要件ID | 優先度 | 要件 | 受入基準 |
|--------|----------|-------------|---------------------|
| ELEC-REL-001 | HIGH | 電気システムは5000時間MTBFで動作すること | • 平均故障間隔 ≥5000時間<br>• 加速寿命試験でテスト<br>• コンポーネントディレーティング（最大定格の<80%で動作） |
| ELEC-REL-002 | HIGH | 重要なコンポーネントには過電流/過電圧保護を備えること | • すべての電源バスにヒューズ<br>• 信号ラインにTVSダイオード<br>• 自動シャットダウンと回復 |

### 4.2 環境

| 要件ID | 優先度 | 要件 | 受入基準 |
|--------|----------|-------------|---------------------|
| ELEC-ENV-001 | HIGH | 電気コンポーネントは-10°C〜+40°C環境で動作すること | • 温度極限のディレーティング<br>• 熱管理（ヒートシンク、必要に応じてファン）<br>• -10°Cでのコールドスタートテスト |
| ELEC-ENV-002 | MEDIUM | 電気エンクロージャーは最低IP54定格を達成すること | • 防塵（限定侵入）<br>• 防飛沫<br>• エンクロージャー蓋のガスケット |

### 4.3 保守性

| 要件ID | 優先度 | 要件 | 受入基準 |
|--------|----------|-------------|---------------------|
| ELEC-MAINT-001 | MEDIUM | ヒューズとリレーは分解なしでアクセス可能であること | • ラベル付きヒューズパネル<br>• 工具不要アクセス（フリップリッドエンクロージャー）<br>• スペアヒューズ付属 |
| ELEC-MAINT-002 | MEDIUM | 配線は両端でラベル付けされること | • ヒートシュリンクラベルまたはケーブルタグ<br>• フォーマット: "MOTOR_FL_POWER"（明確な説明）<br>• 配線図提供 |

---

## 5. テスト要件

| テストタイプ | 受入基準 |
|-----------|---------------------|
| 電源投入テスト | すべての電圧レールが仕様内（48V、24V、12V、5V ±5%） |
| 負荷テスト | システムがフル負荷（20A @ 48V）で1時間動作、過熱なし |
| モーターテスト | すべての8モーター（4ドライブ、4ステア）がコマンドに応答、過剰電流なし |
| CANバステスト | すべてのCANノードが通信、24時間バスエラーなし |
| E-stopテスト | E-stopが50ms以内にモーター電源を切断、100回再現可能 |
| EMCテスト | 放射放出 <EN 55011クラスB制限 |
| バッテリーテスト | 100サイクル充放電、容量劣化 <10% |

---

## 6. トレーサビリティマトリクス

| 要件カテゴリー | 要件数 | 優先度分布 |
|---------------------|-------------------|----------------------|
| 配電 | 7 | CRITICAL: 5、HIGH: 2 |
| バッテリーとBMS | 9 | CRITICAL: 5、HIGH: 3、MEDIUM: 1 |
| モーターコントローラー | 8 | CRITICAL: 3、HIGH: 5 |
| センサー電源 | 6 | HIGH: 4、MEDIUM: 2 |
| 通信バス | 7 | CRITICAL: 1、HIGH: 5、MEDIUM: 1 |
| 安全回路 | 7 | CRITICAL: 3、HIGH: 4 |
| ワイヤーハーネス | 6 | HIGH: 3、MEDIUM: 3 |
| EMCと接地 | 5 | HIGH: 2、MEDIUM: 3 |
| 非機能 | 6 | HIGH: 4、MEDIUM: 2 |
| **合計** | **61** | **CRITICAL: 17、HIGH: 32、MEDIUM: 12** |

---

## 7. 部品表（主要電気コンポーネント）

| コンポーネント | 数量 | 仕様 | 概算コスト（USD） |
|-----------|----------|---------------|---------------------|
| バッテリーパック | 1 | 48V 20Ah LiFePO4 with BMS | $400-600 |
| DC-DC 48V→24V | 1 | 10A、85%効率 | $40-60 |
| DC-DC 48V→12V | 1 | 15A、85%効率 | $50-70 |
| DC-DC 48V→5V | 1 | 10A、80%効率 | $30-50 |
| ブラシレスモーターコントローラー | 4 | 48V、20A、CANバス | 各$60-80 |
| ステッパー/サーボコントローラー | 4 | 24V、5A、CANバス | 各$40-60 |
| CANトランシーバー | 2 | SN65HVD230または同等品 | 各$2-5 |
| E-stopボタン | 1 | 赤キノコ、ツイストリリース | $10-20 |
| コンタクター/リレー | 2 | 60A、48Vコイル | 各$15-30 |
| ヒューズ | 10+ | 各種定格（3A-60A） | 各$1-5 |
| コネクター（XT60、XT90、JST、Molex） | 各種 | - | 合計$50-100 |
| ワイヤー/ケーブル | 50m+ | 10-24 AWG、各種色 | $100-200 |

**総概算コスト:** $1,200 - $1,800（電気コンポーネントのみ）

---

## 8. 仮定と依存関係

### 8.1 仮定

1. バッテリー充電用のAC主電源が利用可能（48V充電器は車両の一部ではない）
2. コンピュートユニット（AMD Ryzen）は12V入力で動作（DC電源）
3. LiDARとカメラは12Vまたは5V電源入力をサポート
4. 施設には換気付きの指定充電エリアがある

### 8.2 依存関係

1. MECHANICAL_REQUIREMENTS.md（コンポーネント取り付け）
2. HARDWARE_SOFTWARE_INTERFACES.md（センサー/モーター用ROS 2トピック）
3. EXTERIOR_REQUIREMENTS.md（eHMI電源要件）
4. バッテリーパックとモーターコントローラーのサプライヤー可用性

---

## 9. 未解決問題とリスク

### 9.1 未解決問題

| ID | 問題 | オーナー | 目標解決 |
|----|-------|-------|-------------------|
| ELEC-ISSUE-001 | バッテリーパックサプライヤー選択（LiFePO4対LiPo） | Tsuchiya | Week 4 |
| ELEC-ISSUE-002 | モーターコントローラーCANバス互換性検証 | Tsuchiya | Week 4 |
| ELEC-ISSUE-003 | 充電器仕様（オンボード対オフボード） | Tsuchiya | Week 5 |

### 9.2 リスク

| リスク | 確率 | 影響 | 緩和策 |
|------|------------|--------|------------|
| バッテリー熱暴走（火災リスク） | LOW | CRITICAL | LiFePO4使用（より安全な化学）、熱監視、適切な換気 |
| EMIによるCANバスエラー | MEDIUM | MEDIUM | シールドケーブル、ツイストペア、適切な終端、テスト |
| DC-DCコンバーター故障 | LOW | HIGH | 品質コンポーネント使用（Mean Well、TDK-Lambda）、過電流保護 |
| E-stopリレー溶着（閉じたまま） | LOW | CRITICAL | 自動車グレードリレー使用、冗長安全回路、定期テスト |

---

## 10. 改訂履歴

| バージョン | 日付 | 著者 | 変更 |
|---------|------|--------|---------|
| 1.0 | 2025-12-16 | Tsuchiya | 初期ドラフト - Week 3ドキュメント |

---

**ドキュメント終了**

**総要件数:** 61
**ドキュメントステータス:** レビュー用ドラフト
**次回レビュー:** Week 4（eHMI電源統合についてKirilと、ROS 2センサーインターフェースについてPankajと）
