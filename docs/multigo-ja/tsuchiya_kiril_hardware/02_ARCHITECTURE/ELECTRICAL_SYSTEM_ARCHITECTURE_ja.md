# 電気システムアーキテクチャ

**プロジェクト:** 屋外車椅子輸送ロボット - マルチチームシステム
**ドキュメントタイプ:** ハードウェアアーキテクチャ仕様
**チーム:** Tsuchiya（ハードウェア）
**日付:** December 16, 2025
**バージョン:** 1.0

---

## 配電アーキテクチャ

```
┌────────────────────────────────────────────────────────────┐
│                  48V LiFePO4バッテリー                     │
│                  (13S、20Ah、960Wh)                        │
│                       + BMS                                │
└──────────────────┬─────────────────────────────────────────┘
                   │
        ┌──────────┴──────────────┐
        │                         │
   ┌────▼────┐              ┌────▼────┐
   │ 48Vバス │              │緊急     │
   │(モーター)│              │リレー   │
   └────┬────┘              └────┬────┘
        │                        │
   ┌────┴───────┬───────────┬───┴───────────┐
   │            │           │                │
┌──▼──┐    ┌──▼──┐    ┌──▼──┐         ┌───▼────┐
│モーター│    │モーター│    │モーター│         │DC-DC   │
│コントロ│    │コントロ│    │コントロ│   ...   │48V→24V │
│ーラー│    │ーラー│    │ーラー│         │(10A)   │
│×8   │    │     │    │     │         └───┬────┘
└─────┘    └─────┘    └─────┘             │
                                      ┌────▼────┐
                                      │DC-DC    │
                                      │24V→12V  │
                                      │(15A)    │
                                      └───┬─────┘
                                          │
                                     ┌────▼────┐
                                     │DC-DC    │
                                     │12V→5V   │
                                     │(10A)    │
                                     └────┬────┘
                                          │
                         ┌────────────────┼────────────┐
                         │                │            │
                    ┌────▼─────┐    ┌────▼────┐  ┌───▼────┐
                    │Jetson    │    │センサー │  │USB     │
                    │Orin Nano │    │(LiDAR,  │  │周辺機器│
                    │(12V/5V)  │    │カメラ)  │  │        │
                    └──────────┘    └─────────┘  └────────┘
```

## 電圧レール

| レール | ソース | 電流容量 | 消費者 | 目的 |
|------|--------|------------------|-----------|---------|
| 48V | バッテリー | 30A連続、60Aピーク | 8×モーターコントローラー | スワーブドライブ推進 |
| 24V | 48V→24V DC-DC | 10A | eHMI ESP32、外部照明 | 外部システム |
| 12V | 24V→12V DC-DC | 15A | Jetson Orin Nano、LiDAR、カメラ | コンピュートとセンサー |
| 5V | 12V→5V DC-DC | 10A | USB周辺機器、タッチスクリーン | 低電力デバイス |

## 通信バス

### CANバスネットワーク

**CAN0（高速: 500 kbit/s）**
- 8×モーターコントローラー（ドライブ + ステア）
- サイクルタイム: 10ms
- 終端: 両端に120Ω

**CAN1（中速: 250 kbit/s）**
- バッテリー管理システム（BMS）
- IMUセンサー
- 安全コントローラー
- サイクルタイム: 100ms

### UART接続

| UARTポート | ボーレート | 接続 | 目的 |
|-----------|-----------|------------|---------|
| UART0 | 115200 | Jetson ↔ ESP32（eHMI） | 外部ディスプレイ/オーディオ制御 |
| UART1 | 115200 | 予約（将来のGPS） | 将来の拡張 |

### Ethernet

- Jetson Orin Nano ↔ ルーター（1 Gbps）
- ルーター ↔ WiFi AP
- ルーター ↔ LTEモデム

## 安全回路

### 非常停止チェーン

```
物理非常停止ボタン（NC）──┬── UI非常停止コマンド
                        │
                        ▼
                 安全コントローラー
                        │
                        ▼
                 緊急リレー
              (モーターへの48Vを切断)
                        │
                        ▼
                 モーター停止（<100ms）
```

### 過電流保護

- メイン48Vバス: 60A回路ブレーカー
- 24Vレール: 12Aヒューズ
- 12Vレール: 18Aヒューズ
- 5Vレール: 12Aヒューズ

### 熱管理

- BMS温度監視（0°C〜45°C動作範囲）
- モーターコントローラー温度制限（最大85°C）
- コンピュートユニット用強制空冷（40mmファン、12V）

## コネクターと配線

### メイン電源コネクター

- バッテリー: Anderson PowerPole 75A
- モーターコントローラー: XT60コネクター
- DC-DCコンバーター: Molex Mini-Fit Jr.

### 信号コネクター

- CANバス: JST-XH 4ピン（CAN_H、CAN_L、GND、+5V）
- UART: JST-XH 4ピン（TX、RX、GND、+3.3V）
- 非常停止: M12 4ピンコネクター（IP67）

### 配線仕様

- 48V電源: 10 AWG（5.26mm²）シリコンワイヤー、40A定格
- 24V電源: 14 AWG（2.08mm²）
- 12V電源: 16 AWG（1.31mm²）
- CANバス: ツイストペア、シールド、120Ωインピーダンス
- すべての配線: 難燃性、自動車グレード

## PCB設計

### 安全コントローラーPCB

- マイクロコントローラー: STM32F4（自動車グレード）
- 入力: 非常停止ボタン、ソフトウェア非常停止コマンド
- 出力: 緊急リレー制御、ステータスLED
- ウォッチドッグタイマー: 500msタイムアウト
- 冗長電源（24V + 12V）

### 配電PCB

- すべてのレール用ヒューズホルダー
- 電圧監視（ADC）
- 電流センシング（ホール効果センサー）
- 各レール用ステータスLED

## 接地とEMC

- バッテリーマイナス端子での単一点接地
- シャーシグランドはバッテリーグランドから絶縁
- すべての高周波信号用シールドケーブル（CAN、Ethernet）
- 電源レール上のフェライトビーズ（EMI抑制）
- スター接地トポロジー

## IP定格

| コンポーネント | IP定格 | 保護 |
|-----------|-----------|------------|
| バッテリーエンクロージャー | IP65 | 防塵、噴流防水 |
| モーターコントローラー | IP67 | 防塵、一時的浸水 |
| メインコンピュートエンクロージャー | IP54 | 防塵、飛沫防水 |
| コネクター（外部） | IP67 | 防水シールドコネクター |

---

**合計:** ELECTRICAL_REQUIREMENTS.mdで61要件をカバー
**関連:** COMMUNICATION_SYSTEM_REQUIREMENTS.md（83要件）

**ドキュメント終了**
